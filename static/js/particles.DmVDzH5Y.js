import{j}from"./jsx-runtime.CRkqtJS5.js";import{r as i}from"./index.B52nOzfP.js";function B(){const[f,d]=i.useState({x:0,y:0});return i.useEffect(()=>{const h=m=>{d({x:m.clientX,y:m.clientY})};return window.addEventListener("mousemove",h),()=>{window.removeEventListener("mousemove",h)}},[]),f}function H(f){f=f.replace("#",""),f.length===3&&(f=f.split("").map(w=>w+w).join(""));const d=parseInt(f,16),h=d>>16&255,m=d>>8&255,z=d&255;return[h,m,z]}const W=({className:f="",quantity:d=100,staticity:h=50,ease:m=50,size:z=.4,refresh:w=!1,color:C="#ffffff",vx:b=0,vy:A=0})=>{const c=i.useRef(null),x=i.useRef(null),r=i.useRef(null),g=i.useRef([]),y=B(),M=i.useRef({x:0,y:0}),e=i.useRef({w:0,h:0}),l=typeof window<"u"?window.devicePixelRatio:1;i.useEffect(()=>(c.current&&(r.current=c.current.getContext("2d")),v(),Y(),window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}),[C]),i.useEffect(()=>{F()},[y.x,y.y]),i.useEffect(()=>{v()},[w]);const v=()=>{L(),$()},F=()=>{if(c.current){const t=c.current.getBoundingClientRect(),{w:n,h:s}=e.current,o=y.x-t.left-n/2,a=y.y-t.top-s/2;o<n/2&&o>-n/2&&a<s/2&&a>-s/2&&(M.current.x=o,M.current.y=a)}},L=()=>{x.current&&c.current&&r.current&&(g.current.length=0,e.current.w=x.current.offsetWidth,e.current.h=x.current.offsetHeight,c.current.width=e.current.w*l,c.current.height=e.current.h*l,c.current.style.width=`${e.current.w}px`,c.current.style.height=`${e.current.h}px`,r.current.scale(l,l))},P=()=>{const t=Math.floor(Math.random()*e.current.w),n=Math.floor(Math.random()*e.current.h),s=0,o=0,a=Math.floor(Math.random()*2)+z,u=0,p=parseFloat((Math.random()*.6+.1).toFixed(1)),R=(Math.random()-.5)*.1,T=(Math.random()-.5)*.1,q=.1+Math.random()*4;return{x:t,y:n,translateX:s,translateY:o,size:a,alpha:u,targetAlpha:p,dx:R,dy:T,magnetism:q}},S=H(C),E=(t,n=!1)=>{if(r.current){const{x:s,y:o,translateX:a,translateY:u,size:p,alpha:R}=t;r.current.translate(a,u),r.current.beginPath(),r.current.arc(s,o,p,0,2*Math.PI),r.current.fillStyle=`rgba(${S.join(", ")}, ${R})`,r.current.fill(),r.current.setTransform(l,0,0,l,0,0),n||g.current.push(t)}},X=()=>{r.current&&r.current.clearRect(0,0,e.current.w,e.current.h)},$=()=>{X();const t=d;for(let n=0;n<t;n++){const s=P();E(s)}},I=(t,n,s,o,a)=>{const u=(t-n)*(a-o)/(s-n)+o;return u>0?u:0},Y=()=>{X(),g.current.forEach((t,n)=>{const o=[t.x+t.translateX-t.size,e.current.w-t.x-t.translateX-t.size,t.y+t.translateY-t.size,e.current.h-t.y-t.translateY-t.size].reduce((u,p)=>Math.min(u,p)),a=parseFloat(I(o,0,20,0,1).toFixed(2));if(a>1?(t.alpha+=.02,t.alpha>t.targetAlpha&&(t.alpha=t.targetAlpha)):t.alpha=t.targetAlpha*a,t.x+=t.dx+b,t.y+=t.dy+A,t.translateX+=(M.current.x/(h/t.magnetism)-t.translateX)/m,t.translateY+=(M.current.y/(h/t.magnetism)-t.translateY)/m,E(t,!0),t.x<-t.size||t.x>e.current.w+t.size||t.y<-t.size||t.y>e.current.h+t.size){g.current.splice(n,1);const u=P();E(u)}}),window.requestAnimationFrame(Y)};return j.jsx("div",{className:f,ref:x,"aria-hidden":"true",children:j.jsx("canvas",{ref:c,className:"size-full"})})};export{W as default};